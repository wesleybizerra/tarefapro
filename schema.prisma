 generator client {
provider = "prisma-client-js"
}
datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}
enum UserRole {
USER
ADMIN
}
enum LedgerType {
CREDIT
DEBIT
}
enum LedgerStatus {
PENDING
AVAILABLE
COMPLETED
REVERSED
}
model User {
id String @id @default(cuid())
email String @unique
password String
name String
role UserRole @default(USER)
pixKeyEncrypted String?
balance Decimal @default(0.0) @db.Decimal(12, 2)
createdAt DateTime @default(now())
ledgerEntries LedgerEntry[]
withdrawals Withdrawal[]
}
model LedgerEntry {
id String @id @default(cuid())
userId String
user User @relation(fields: [userId], references: [id])
amount Decimal @db.Decimal(12, 2)
type LedgerType
status LedgerStatus @default(PENDING)
description String
createdAt DateTime @default(now())
}
model Withdrawal {
id String @id @default(cuid())
userId String
user User @relation(fields: [userId], references: [id])
amount Decimal @db.Decimal(12, 2)
status String @default("REQUESTED")
externalId String? @unique
createdAt DateTime @default(now())
}